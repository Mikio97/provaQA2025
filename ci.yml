# .github/workflows/ci.yml

name: CI - Executar Testes Pytest

# 1. Gatilho: Define o que inicia o workflow
on:
  push:
    # O workflow serÃ¡ acionado SOMENTE quando houver um push para a branch 'main'
    branches: [ main ]
  # Permite que o workflow seja disparado manualmente (opcional, mas Ãºtil)
  workflow_dispatch:

# Define a tarefa principal
jobs:
  build:
    # 2. Ambiente: Escolhe o sistema operacional para rodar a tarefa
    runs-on: ubuntu-latest
    
    # Passos a serem executados
    steps:
    
    # 3. Checkout: Baixa o seu cÃ³digo do repositÃ³rio para a mÃ¡quina virtual
    - name: ğŸ“¥ Checkout do CÃ³digo
      uses: actions/checkout@v4
      
    # 4. ConfiguraÃ§Ã£o do Python: Define a versÃ£o exata do Python
    - name: ğŸ Configurar Python 3.10
      uses: actions/setup-python@v5
      with:
        python-version: '3.10'
        
    # 5. InstalaÃ§Ã£o de DependÃªncias: Prepara o ambiente
    - name: ğŸ› ï¸ Instalar DependÃªncias
      run: |
        # Instala o Pytest
        pip install pytest
        # Instala as dependÃªncias listadas no requirements.txt (se existir)
        if [ -f requirements.txt ]; then pip install -r requirements.txt; fi
        
    # 6. ExecuÃ§Ã£o dos Testes: Roda o Pytest
    - name: âœ… Executar Pytest
      run: |
        pytest